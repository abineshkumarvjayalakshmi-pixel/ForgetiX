<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ForgetiX AI Assistant</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(circle at top, #1a1a2e, #0f0c29);
      color: white;
      font-family: 'Poppins', sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    canvas { width: 100%; height: 60%; }
    .chat-box {
      width: 90%;
      max-width: 600px;
      height: 35%;
      background: rgba(255,255,255,0.08);
      border-radius: 20px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      overflow-y: auto;
    }
    .message {
      margin: 8px;
      padding: 10px 15px;
      border-radius: 10px;
      max-width: 70%;
      line-height: 1.4;
    }
    .user { background: #6c63ff; align-self: flex-end; }
    .bot { background: rgba(255,255,255,0.15); align-self: flex-start; }
    input {
      width: 85%;
      padding: 10px;
      border: none;
      border-radius: 10px;
      margin-top: 10px;
      outline: none;
    }
    button {
      width: 10%;
      border: none;
      background: #6c63ff;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <canvas id="face"></canvas>
  <!-- Somewhere in your assistant.html -->
<div id="assistant-container">
  <!-- Paste the entire SVG here -->
  <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg" id="jarvis-avatar">
    <!-- Outer glowing circle -->
    <circle cx="100" cy="100" r="90" stroke="#0ff" stroke-width="4" filter="url(#glow)"/>
    
    <!-- Eyes -->
    <rect x="55" y="80" width="20" height="10" rx="5" fill="#0ff" id="left-eye" />
    <rect x="125" y="80" width="20" height="10" rx="5" fill="#0ff" id="right-eye" />
    
    <!-- Mouth (pulse bar) -->
    <rect x="80" y="140" width="40" height="10" rx="5" fill="#0ff" id="mouth" />
    
    <defs>
      <filter id="glow" x="-20%" y="-20%" width="140%" height="140%" color-interpolation-filters="sRGB">
        <feDropShadow dx="0" dy="0" stdDeviation="4" flood-color="#0ff"/>
        <feDropShadow dx="0" dy="0" stdDeviation="8" flood-color="#0ff" flood-opacity="0.5"/>
      </filter>
    </defs>
  </svg>
</div>


  <!-- Three.js for Humanoid Face -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
  <script>
    // Minimal 3D Face Placeholder
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('face'), alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight*0.6);
    const geometry = new THREE.SphereGeometry(2, 64, 64);
const wireframe = new THREE.WireframeGeometry(geometry);
const line = new THREE.LineSegments(wireframe, new THREE.LineBasicMaterial({ color: 0x00ffff, opacity: 0.3, transparent: true }));
scene.add(line);
    const material = new THREE.MeshStandardMaterial({
  color: 0x6c63ff,
  emissive: 0x3a0ca3,
  emissiveIntensity: 0.8,
  roughness: 0.2,
  metalness: 0.8
});
    const head = new THREE.Mesh(geometry, material);
    scene.add(head);
const light1 = new THREE.PointLight(0xffffff, 2);
light1.position.set(5, 5, 5);
const light2 = new THREE.PointLight(0x6c63ff, 1.5);
light2.position.set(-5, -5, 3);
scene.add(light1, light2);

const ambient = new THREE.AmbientLight(0x404040, 1.2);
scene.add(ambient);
    camera.position.z = 5;
    function animate() {
      requestAnimationFrame(animate);
      head.rotation.y += 0.01;
      head.material.emissiveIntensity = 0.5 + Math.sin(Date.now() * 0.002) * 0.3;
      renderer.render(scene, camera);
    }
    animate();

    // Chat functionality
    const chatBox = document.getElementById("chat-box");
    function addMessage(text, sender) {
      const div = document.createElement("div");
      div.className = "message " + sender;
      div.innerText = text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
async function sendMessage() {
  const input = document.getElementById("userInput").value.trim();
  if (!input) return;

  addMessage("user", input);
  document.getElementById("userInput").value = "";

  // Show "processing" text first
  const botMessage = addMessage("bot", "I'm processing your request ü§ñ");

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-...sv8A" // <-- Replace this later safely
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: input }]
      })
    });

    const data = await response.json();
    const reply = data.choices[0].message.content;
    updateMessage(botMessage, reply);
  } catch (error) {
    updateMessage(botMessage, "‚ö†Ô∏è Oops! Something went wrong, please try again.");
    console.error(error);
  }
}

  </script>
  <!-- Firebase Setup -->
<script type="module">
  // Import required Firebase libraries directly from CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-analytics.js";

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCv0JlCNa5VG8FCAW-VWh4mtKqiS11tPts",
    authDomain: "forgetix-f1c7b.firebaseapp.com",
    projectId: "forgetix-f1c7b",
    storageBucket: "forgetix-f1c7b.firebasestorage.app",
    messagingSenderId: "53528277444",
    appId: "1:53528277444:web:79d81e14be2a9efbf4f491",
    measurementId: "G-5NGDGB2J7B"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  // Example function: save a chat message
  async function saveMessage(user, message) {
    try {
      await addDoc(collection(db, "messages"), {
        user: user,
        message: message,
        timestamp: new Date()
      });
      console.log("‚úÖ Message saved to Firestore");
    } catch (e) {
      console.error("‚ùå Error adding document:", e);
    }
  }

  // ---- Test line (optional) ----
  // saveMessage("Tester", "Hello from ForgetiX!");
</script>
</body>
</html>
