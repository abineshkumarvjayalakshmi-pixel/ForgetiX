<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ForgetiX AI Assistant</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(circle at top, #1a1a2e, #0f0c29);
      color: white;
      font-family: 'Poppins', sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    canvas { width: 100%; height: 60%; }
    .chat-box {
      width: 90%;
      max-width: 600px;
      height: 35%;
      background: rgba(255,255,255,0.08);
      border-radius: 20px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      overflow-y: auto;
    }
    .message {
      margin: 8px;
      padding: 10px 15px;
      border-radius: 10px;
      max-width: 70%;
      line-height: 1.4;
    }
    .user { background: #6c63ff; align-self: flex-end; }
    .bot { background: rgba(255,255,255,0.15); align-self: flex-start; }
    input {
      width: 85%;
      padding: 10px;
      border: none;
      border-radius: 10px;
      margin-top: 10px;
      outline: none;
    }
    button {
      width: 10%;
      border: none;
      background: #6c63ff;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <canvas id="face"></canvas>
  <div class="chat-box" id="chat-box"></div>
  <div style="display:flex; width:90%; max-width:600px;">
    <input id="msg" placeholder="Type something..." />
    <button onclick="sendMessage()">Send</button>
  </div>

  <!-- Three.js for Humanoid Face -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
  <script>
    // Minimal 3D Face Placeholder
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('face'), alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight*0.6);
    const geometry = new THREE.SphereGeometry(2, 64, 64);
const wireframe = new THREE.WireframeGeometry(geometry);
const line = new THREE.LineSegments(wireframe, new THREE.LineBasicMaterial({ color: 0x00ffff, opacity: 0.3, transparent: true }));
scene.add(line);
    const material = new THREE.MeshStandardMaterial({
  color: 0x6c63ff,
  emissive: 0x3a0ca3,
  emissiveIntensity: 0.8,
  roughness: 0.2,
  metalness: 0.8
});
    const head = new THREE.Mesh(geometry, material);
    scene.add(head);
const light1 = new THREE.PointLight(0xffffff, 2);
light1.position.set(5, 5, 5);
const light2 = new THREE.PointLight(0x6c63ff, 1.5);
light2.position.set(-5, -5, 3);
scene.add(light1, light2);

const ambient = new THREE.AmbientLight(0x404040, 1.2);
scene.add(ambient);
    camera.position.z = 5;
    function animate() {
      requestAnimationFrame(animate);
      head.rotation.y += 0.01;
      head.material.emissiveIntensity = 0.5 + Math.sin(Date.now() * 0.002) * 0.3;
      renderer.render(scene, camera);
    }
    animate();

    // Chat functionality
    const chatBox = document.getElementById("chat-box");
    function addMessage(text, sender) {
      const div = document.createElement("div");
      div.className = "message " + sender;
      div.innerText = text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
async function sendMessage() {
  const input = document.getElementById("userInput").value.trim();
  if (!input) return;

  addMessage("user", input);
  document.getElementById("userInput").value = "";

  // Show "processing" text first
  const botMessage = addMessage("bot", "I'm processing your request ðŸ¤–");

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-...sv8A" // <-- Replace this later safely
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: input }]
      })
    });

    const data = await response.json();
    const reply = data.choices[0].message.content;
    updateMessage(botMessage, reply);
  } catch (error) {
    updateMessage(botMessage, "âš ï¸ Oops! Something went wrong, please try again.");
    console.error(error);
  }
}

  </script>
</body>
</html>
